// Copyright 2015 Harry Burt. MIT licensed.
(function(b){b.toTable=function(d,f){var g=Object.keys(d).sort(),c=[],k=b("<table>");if(f="undefined"===typeof f?!0:f)d.Total={},g.push("Total");for(var a in d)d.hasOwnProperty(a)&&b.extend(c,d[a]);var c=Object.keys(c).sort(),e=b("<tr>").append(b("<th>"));for(a=0;a<c.length;a++)e.append(b("<th>").text(c[a]));f&&e.append(b("<th>").text("Total"));k.append(e);for(e=0;e<g.length;e++){var l=b("<tr>").append(b("<th>").text(g[e])),m=0;for(a=0;a<c.length;a++){var n="-",h=d[g[e]][c[a]];h&&(n=h,f&&(m+=h,d.Total[c[a]]|| (d.Total[c[a]]=0),d.Total[c[a]]+=h));l.append(b("<td>").text(n))}f&&l.append(b("<td>").text(m));k.append(l)}return k}})(jQuery);